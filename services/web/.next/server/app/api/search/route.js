/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/search/route";
exports.ids = ["app/api/search/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "node:assert":
/*!******************************!*\
  !*** external "node:assert" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:assert");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ "node:console":
/*!*******************************!*\
  !*** external "node:console" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:console");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:diagnostics_channel":
/*!*******************************************!*\
  !*** external "node:diagnostics_channel" ***!
  \*******************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:diagnostics_channel");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:events");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ "node:http2":
/*!*****************************!*\
  !*** external "node:http2" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http2");

/***/ }),

/***/ "node:https":
/*!*****************************!*\
  !*** external "node:https" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ "node:os":
/*!**************************!*\
  !*** external "node:os" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:os");

/***/ }),

/***/ "node:perf_hooks":
/*!**********************************!*\
  !*** external "node:perf_hooks" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:perf_hooks");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "node:querystring":
/*!***********************************!*\
  !*** external "node:querystring" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:querystring");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:timers/promises":
/*!***************************************!*\
  !*** external "node:timers/promises" ***!
  \***************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:timers/promises");

/***/ }),

/***/ "node:tls":
/*!***************************!*\
  !*** external "node:tls" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:tls");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "node:util/types":
/*!**********************************!*\
  !*** external "node:util/types" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util/types");

/***/ }),

/***/ "node:worker_threads":
/*!**************************************!*\
  !*** external "node:worker_threads" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:worker_threads");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsearch%2Froute&page=%2Fapi%2Fsearch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsearch%2Froute.ts&appDir=%2FUsers%2Frainsfall%2FDownloads%2Fsearch-engine%2Fservices%2Fweb%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frainsfall%2FDownloads%2Fsearch-engine%2Fservices%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsearch%2Froute&page=%2Fapi%2Fsearch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsearch%2Froute.ts&appDir=%2FUsers%2Frainsfall%2FDownloads%2Fsearch-engine%2Fservices%2Fweb%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frainsfall%2FDownloads%2Fsearch-engine%2Fservices%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_rainsfall_Downloads_search_engine_services_web_src_app_api_search_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/search/route.ts */ \"(rsc)/./src/app/api/search/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/search/route\",\n        pathname: \"/api/search\",\n        filename: \"route\",\n        bundlePath: \"app/api/search/route\"\n    },\n    resolvedPagePath: \"/Users/rainsfall/Downloads/search-engine/services/web/src/app/api/search/route.ts\",\n    nextConfigOutput,\n    userland: _Users_rainsfall_Downloads_search_engine_services_web_src_app_api_search_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZzZWFyY2glMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnNlYXJjaCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnNlYXJjaCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnJhaW5zZmFsbCUyRkRvd25sb2FkcyUyRnNlYXJjaC1lbmdpbmUlMkZzZXJ2aWNlcyUyRndlYiUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZyYWluc2ZhbGwlMkZEb3dubG9hZHMlMkZzZWFyY2gtZW5naW5lJTJGc2VydmljZXMlMkZ3ZWImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2lDO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcmFpbnNmYWxsL0Rvd25sb2Fkcy9zZWFyY2gtZW5naW5lL3NlcnZpY2VzL3dlYi9zcmMvYXBwL2FwaS9zZWFyY2gvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3NlYXJjaC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3NlYXJjaFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc2VhcmNoL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3JhaW5zZmFsbC9Eb3dubG9hZHMvc2VhcmNoLWVuZ2luZS9zZXJ2aWNlcy93ZWIvc3JjL2FwcC9hcGkvc2VhcmNoL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsearch%2Froute&page=%2Fapi%2Fsearch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsearch%2Froute.ts&appDir=%2FUsers%2Frainsfall%2FDownloads%2Fsearch-engine%2Fservices%2Fweb%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frainsfall%2FDownloads%2Fsearch-engine%2Fservices%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/search/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/search/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_elasticsearch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/elasticsearch */ \"(rsc)/./src/lib/elasticsearch.ts\");\n/* harmony import */ var _lib_crawler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/crawler */ \"(rsc)/./src/lib/crawler.ts\");\n\n\n\nasync function GET(request) {\n    const { searchParams } = new URL(request.url);\n    const query = searchParams.get('q');\n    const page = parseInt(searchParams.get('page') || '1');\n    const size = parseInt(searchParams.get('size') || '10');\n    const waitForCrawl = searchParams.get('waitForCrawl') === 'true';\n    if (!query) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Query parameter required'\n        }, {\n            status: 400\n        });\n    }\n    try {\n        // First check if Elasticsearch is healthy\n        const isHealthy = await (0,_lib_elasticsearch__WEBPACK_IMPORTED_MODULE_1__.checkElasticsearchHealth)();\n        if (!isHealthy) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Search service is currently unavailable'\n            }, {\n                status: 503\n            });\n        }\n        // Try searching first\n        const searchResults = await (0,_lib_elasticsearch__WEBPACK_IMPORTED_MODULE_1__.search)(query, page, size);\n        if (searchResults.total === 0) {\n            // Trigger crawling for queries with zero results\n            try {\n                const crawlResponse = await (0,_lib_crawler__WEBPACK_IMPORTED_MODULE_2__.triggerCrawl)(query, {\n                    maxDepth: 3,\n                    maxPages: 100,\n                    priority: true,\n                    force_crawl: true\n                });\n                // If waitForCrawl is true, wait a bit and try searching again\n                if (waitForCrawl) {\n                    await new Promise((resolve)=>setTimeout(resolve, 5000)) // Wait 5 seconds\n                    ;\n                    const newResults = await (0,_lib_elasticsearch__WEBPACK_IMPORTED_MODULE_1__.search)(query, page, size);\n                    if (newResults.total > 0) {\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            ...newResults,\n                            message: 'Found new results after crawling!'\n                        });\n                    }\n                }\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    results: [],\n                    total: 0,\n                    took: 0,\n                    message: 'No results found yet. We\\'ve started crawling for this query. Please try again in a few minutes.',\n                    crawlingStarted: true,\n                    jobId: crawlResponse.jobId\n                });\n            } catch (crawlError) {\n                console.error('Failed to trigger crawl:', crawlError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    results: [],\n                    total: 0,\n                    took: 0,\n                    message: crawlError instanceof Error ? crawlError.message : 'Failed to start crawling. Please try again later.',\n                    crawlingStarted: false\n                });\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ...searchResults,\n            page,\n            totalPages: Math.ceil(searchResults.total / size)\n        });\n    } catch (error) {\n        console.error('Search error:', error);\n        if (error instanceof _lib_elasticsearch__WEBPACK_IMPORTED_MODULE_1__.SearchError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Search operation failed',\n                details: error.message\n            }, {\n                status: 503\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'An unexpected error occurred'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3JhaW5zZmFsbC9Eb3dubG9hZHMvc2VhcmNoLWVuZ2luZS9zZXJ2aWNlcy93ZWIvc3JjL2FwcC9hcGkvc2VhcmNoL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgc2VhcmNoLCBTZWFyY2hFcnJvciwgY2hlY2tFbGFzdGljc2VhcmNoSGVhbHRoIH0gZnJvbSAnQC9saWIvZWxhc3RpY3NlYXJjaCdcbmltcG9ydCB7IHRyaWdnZXJDcmF3bCB9IGZyb20gJ0AvbGliL2NyYXdsZXInXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogUmVxdWVzdCkge1xuICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcbiAgY29uc3QgcXVlcnkgPSBzZWFyY2hQYXJhbXMuZ2V0KCdxJylcbiAgY29uc3QgcGFnZSA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ3BhZ2UnKSB8fCAnMScpXG4gIGNvbnN0IHNpemUgPSBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdzaXplJykgfHwgJzEwJylcbiAgY29uc3Qgd2FpdEZvckNyYXdsID0gc2VhcmNoUGFyYW1zLmdldCgnd2FpdEZvckNyYXdsJykgPT09ICd0cnVlJ1xuXG4gIGlmICghcXVlcnkpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnUXVlcnkgcGFyYW1ldGVyIHJlcXVpcmVkJyB9LFxuICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgKVxuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBGaXJzdCBjaGVjayBpZiBFbGFzdGljc2VhcmNoIGlzIGhlYWx0aHlcbiAgICBjb25zdCBpc0hlYWx0aHkgPSBhd2FpdCBjaGVja0VsYXN0aWNzZWFyY2hIZWFsdGgoKVxuICAgIGlmICghaXNIZWFsdGh5KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdTZWFyY2ggc2VydmljZSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDMgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIFRyeSBzZWFyY2hpbmcgZmlyc3RcbiAgICBjb25zdCBzZWFyY2hSZXN1bHRzID0gYXdhaXQgc2VhcmNoKHF1ZXJ5LCBwYWdlLCBzaXplKVxuICAgIFxuICAgIGlmIChzZWFyY2hSZXN1bHRzLnRvdGFsID09PSAwKSB7XG4gICAgICAvLyBUcmlnZ2VyIGNyYXdsaW5nIGZvciBxdWVyaWVzIHdpdGggemVybyByZXN1bHRzXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmF3bFJlc3BvbnNlID0gYXdhaXQgdHJpZ2dlckNyYXdsKHF1ZXJ5LCB7XG4gICAgICAgICAgbWF4RGVwdGg6IDMsXG4gICAgICAgICAgbWF4UGFnZXM6IDEwMCxcbiAgICAgICAgICBwcmlvcml0eTogdHJ1ZSxcbiAgICAgICAgICBmb3JjZV9jcmF3bDogdHJ1ZVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIElmIHdhaXRGb3JDcmF3bCBpcyB0cnVlLCB3YWl0IGEgYml0IGFuZCB0cnkgc2VhcmNoaW5nIGFnYWluXG4gICAgICAgIGlmICh3YWl0Rm9yQ3Jhd2wpIHtcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwMCkpIC8vIFdhaXQgNSBzZWNvbmRzXG4gICAgICAgICAgY29uc3QgbmV3UmVzdWx0cyA9IGF3YWl0IHNlYXJjaChxdWVyeSwgcGFnZSwgc2l6ZSlcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAobmV3UmVzdWx0cy50b3RhbCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICAgIC4uLm5ld1Jlc3VsdHMsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdGb3VuZCBuZXcgcmVzdWx0cyBhZnRlciBjcmF3bGluZyEnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgcmVzdWx0czogW10sXG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgdG9vazogMCxcbiAgICAgICAgICBtZXNzYWdlOiAnTm8gcmVzdWx0cyBmb3VuZCB5ZXQuIFdlXFwndmUgc3RhcnRlZCBjcmF3bGluZyBmb3IgdGhpcyBxdWVyeS4gUGxlYXNlIHRyeSBhZ2FpbiBpbiBhIGZldyBtaW51dGVzLicsXG4gICAgICAgICAgY3Jhd2xpbmdTdGFydGVkOiB0cnVlLFxuICAgICAgICAgIGpvYklkOiBjcmF3bFJlc3BvbnNlLmpvYklkXG4gICAgICAgIH0pXG4gICAgICB9IGNhdGNoIChjcmF3bEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byB0cmlnZ2VyIGNyYXdsOicsIGNyYXdsRXJyb3IpXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgcmVzdWx0czogW10sXG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgdG9vazogMCxcbiAgICAgICAgICBtZXNzYWdlOiBjcmF3bEVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBjcmF3bEVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHN0YXJ0IGNyYXdsaW5nLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsXG4gICAgICAgICAgY3Jhd2xpbmdTdGFydGVkOiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAuLi5zZWFyY2hSZXN1bHRzLFxuICAgICAgcGFnZSxcbiAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbChzZWFyY2hSZXN1bHRzLnRvdGFsIC8gc2l6ZSlcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1NlYXJjaCBlcnJvcjonLCBlcnJvcilcbiAgICBcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBTZWFyY2hFcnJvcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnU2VhcmNoIG9wZXJhdGlvbiBmYWlsZWQnLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDMgfVxuICAgICAgKVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJzZWFyY2giLCJTZWFyY2hFcnJvciIsImNoZWNrRWxhc3RpY3NlYXJjaEhlYWx0aCIsInRyaWdnZXJDcmF3bCIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJxdWVyeSIsImdldCIsInBhZ2UiLCJwYXJzZUludCIsInNpemUiLCJ3YWl0Rm9yQ3Jhd2wiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJpc0hlYWx0aHkiLCJzZWFyY2hSZXN1bHRzIiwidG90YWwiLCJjcmF3bFJlc3BvbnNlIiwibWF4RGVwdGgiLCJtYXhQYWdlcyIsInByaW9yaXR5IiwiZm9yY2VfY3Jhd2wiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJuZXdSZXN1bHRzIiwibWVzc2FnZSIsInJlc3VsdHMiLCJ0b29rIiwiY3Jhd2xpbmdTdGFydGVkIiwiam9iSWQiLCJjcmF3bEVycm9yIiwiY29uc29sZSIsIkVycm9yIiwidG90YWxQYWdlcyIsIk1hdGgiLCJjZWlsIiwiZGV0YWlscyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/search/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/crawler.ts":
/*!****************************!*\
  !*** ./src/lib/crawler.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CrawlerError: () => (/* binding */ CrawlerError),\n/* harmony export */   checkCrawlStatus: () => (/* binding */ checkCrawlStatus),\n/* harmony export */   triggerCrawl: () => (/* binding */ triggerCrawl)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n\nconst CRAWLER_SERVICE_URL = process.env.NEXT_PUBLIC_CRAWLER_SERVICE_URL || 'http://crawler:8000';\nclass CrawlerError extends Error {\n    constructor(message, cause){\n        super(message), this.cause = cause;\n        this.name = 'CrawlerError';\n    }\n}\nasync function triggerCrawl(query, options = {}) {\n    try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${CRAWLER_SERVICE_URL}/crawl`, {\n            query,\n            max_depth: options.maxDepth || 2,\n            max_pages: options.maxPages || 100,\n            priority: options.priority ?? true,\n            force_crawl: options.force_crawl ?? false\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Failed to trigger crawl:', error);\n        throw new CrawlerError('Failed to start crawling process', error instanceof Error ? error : undefined);\n    }\n}\nasync function checkCrawlStatus(jobId) {\n    try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${CRAWLER_SERVICE_URL}/status/${jobId}`);\n        return response.data;\n    } catch (error) {\n        console.error('Failed to check crawl status:', error);\n        throw new CrawlerError('Failed to check crawl status', error instanceof Error ? error : undefined);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2NyYXdsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEwQjtBQUUxQixNQUFNQyxzQkFBc0JDLFFBQVFDLEdBQUcsQ0FBQ0MsK0JBQStCLElBQUk7QUFnQnBFLE1BQU1DLHFCQUFxQkM7SUFDaENDLFlBQVlDLE9BQWUsRUFBRSxLQUErQixDQUFFO1FBQzVELEtBQUssQ0FBQ0EsZUFEcUNDLFFBQUFBO1FBRTNDLElBQUksQ0FBQ0MsSUFBSSxHQUFHO0lBQ2Q7QUFDRjtBQUVPLGVBQWVDLGFBQ3BCQyxLQUFhLEVBQ2JDLFVBQWlDLENBQUMsQ0FBQztJQUVuQyxJQUFJO1FBQ0YsTUFBTUMsV0FBVyxNQUFNZCw2Q0FBS0EsQ0FBQ2UsSUFBSSxDQUFnQixHQUFHZCxvQkFBb0IsTUFBTSxDQUFDLEVBQUU7WUFDL0VXO1lBQ0FJLFdBQVdILFFBQVFJLFFBQVEsSUFBSTtZQUMvQkMsV0FBV0wsUUFBUU0sUUFBUSxJQUFJO1lBQy9CQyxVQUFVUCxRQUFRTyxRQUFRLElBQUk7WUFDOUJDLGFBQWFSLFFBQVFRLFdBQVcsSUFBSTtRQUN0QztRQUVBLE9BQU9QLFNBQVNRLElBQUk7SUFDdEIsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDLE1BQU0sSUFBSWxCLGFBQ1Isb0NBQ0FrQixpQkFBaUJqQixRQUFRaUIsUUFBUUU7SUFFckM7QUFDRjtBQUVPLGVBQWVDLGlCQUFpQkMsS0FBYTtJQUtsRCxJQUFJO1FBQ0YsTUFBTWIsV0FBVyxNQUFNZCw2Q0FBS0EsQ0FBQzRCLEdBQUcsQ0FBQyxHQUFHM0Isb0JBQW9CLFFBQVEsRUFBRTBCLE9BQU87UUFDekUsT0FBT2IsU0FBU1EsSUFBSTtJQUN0QixFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGlDQUFpQ0E7UUFDL0MsTUFBTSxJQUFJbEIsYUFDUixnQ0FDQWtCLGlCQUFpQmpCLFFBQVFpQixRQUFRRTtJQUVyQztBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvcmFpbnNmYWxsL0Rvd25sb2Fkcy9zZWFyY2gtZW5naW5lL3NlcnZpY2VzL3dlYi9zcmMvbGliL2NyYXdsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcblxuY29uc3QgQ1JBV0xFUl9TRVJWSUNFX1VSTCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0NSQVdMRVJfU0VSVklDRV9VUkwgfHwgJ2h0dHA6Ly9jcmF3bGVyOjgwMDAnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENyYXdsUmVxdWVzdCB7XG4gIHF1ZXJ5OiBzdHJpbmc7XG4gIG1heERlcHRoPzogbnVtYmVyO1xuICBtYXhQYWdlcz86IG51bWJlcjtcbiAgcHJpb3JpdHk/OiBib29sZWFuO1xuICBmb3JjZV9jcmF3bD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3Jhd2xSZXNwb25zZSB7XG4gIGpvYklkOiBzdHJpbmc7XG4gIHN0YXR1czogJ3F1ZXVlZCcgfCAnc3RhcnRlZCcgfCAnZXJyb3InO1xuICBtZXNzYWdlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgQ3Jhd2xlckVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHB1YmxpYyByZWFkb25seSBjYXVzZT86IHVua25vd24pIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnQ3Jhd2xlckVycm9yJztcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdHJpZ2dlckNyYXdsKFxuICBxdWVyeTogc3RyaW5nLFxuICBvcHRpb25zOiBQYXJ0aWFsPENyYXdsUmVxdWVzdD4gPSB7fVxuKTogUHJvbWlzZTxDcmF3bFJlc3BvbnNlPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0PENyYXdsUmVzcG9uc2U+KGAke0NSQVdMRVJfU0VSVklDRV9VUkx9L2NyYXdsYCwge1xuICAgICAgcXVlcnksXG4gICAgICBtYXhfZGVwdGg6IG9wdGlvbnMubWF4RGVwdGggfHwgMixcbiAgICAgIG1heF9wYWdlczogb3B0aW9ucy5tYXhQYWdlcyB8fCAxMDAsXG4gICAgICBwcmlvcml0eTogb3B0aW9ucy5wcmlvcml0eSA/PyB0cnVlLFxuICAgICAgZm9yY2VfY3Jhd2w6IG9wdGlvbnMuZm9yY2VfY3Jhd2wgPz8gZmFsc2UsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdHJpZ2dlciBjcmF3bDonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IENyYXdsZXJFcnJvcihcbiAgICAgICdGYWlsZWQgdG8gc3RhcnQgY3Jhd2xpbmcgcHJvY2VzcycsXG4gICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiB1bmRlZmluZWRcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0NyYXdsU3RhdHVzKGpvYklkOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIHBhZ2VzUHJvY2Vzc2VkOiBudW1iZXI7XG4gIGVzdGltYXRlZFRpbWVSZW1haW5pbmc/OiBudW1iZXI7XG59PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYCR7Q1JBV0xFUl9TRVJWSUNFX1VSTH0vc3RhdHVzLyR7am9iSWR9YCk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNoZWNrIGNyYXdsIHN0YXR1czonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IENyYXdsZXJFcnJvcihcbiAgICAgICdGYWlsZWQgdG8gY2hlY2sgY3Jhd2wgc3RhdHVzJyxcbiAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IHVuZGVmaW5lZFxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJheGlvcyIsIkNSQVdMRVJfU0VSVklDRV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQ1JBV0xFUl9TRVJWSUNFX1VSTCIsIkNyYXdsZXJFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiY2F1c2UiLCJuYW1lIiwidHJpZ2dlckNyYXdsIiwicXVlcnkiLCJvcHRpb25zIiwicmVzcG9uc2UiLCJwb3N0IiwibWF4X2RlcHRoIiwibWF4RGVwdGgiLCJtYXhfcGFnZXMiLCJtYXhQYWdlcyIsInByaW9yaXR5IiwiZm9yY2VfY3Jhd2wiLCJkYXRhIiwiZXJyb3IiLCJjb25zb2xlIiwidW5kZWZpbmVkIiwiY2hlY2tDcmF3bFN0YXR1cyIsImpvYklkIiwiZ2V0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/crawler.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/elasticsearch.ts":
/*!**********************************!*\
  !*** ./src/lib/elasticsearch.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SearchError: () => (/* binding */ SearchError),\n/* harmony export */   checkElasticsearchHealth: () => (/* binding */ checkElasticsearchHealth),\n/* harmony export */   search: () => (/* binding */ search)\n/* harmony export */ });\n/* harmony import */ var _elastic_elasticsearch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @elastic/elasticsearch */ \"(rsc)/./node_modules/@elastic/elasticsearch/index.js\");\n/* harmony import */ var _elastic_elasticsearch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_elastic_elasticsearch__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _barrel_optimize_names_formatDistanceToNow_date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! __barrel_optimize__?names=formatDistanceToNow!=!date-fns */ \"(rsc)/./node_modules/date-fns/esm/formatDistanceToNow/index.js\");\n\n\nconst client = new _elastic_elasticsearch__WEBPACK_IMPORTED_MODULE_0__.Client({\n    node: process.env.ELASTICSEARCH_URL || 'http://localhost:9200',\n    maxRetries: 3,\n    requestTimeout: 10000,\n    sniffOnStart: true\n});\nclass SearchError extends Error {\n    constructor(message, cause){\n        super(message), this.cause = cause;\n        this.name = 'SearchError';\n    }\n}\nasync function search(query, page = 1, size = 10) {\n    try {\n        const startTime = Date.now();\n        const response = await client.search({\n            index: 'pages',\n            body: {\n                query: {\n                    bool: {\n                        must: {\n                            multi_match: {\n                                query,\n                                fields: [\n                                    'title^4',\n                                    'meta_title^3',\n                                    'meta_description^2.5',\n                                    'content_summary^2',\n                                    'body^1'\n                                ],\n                                type: 'best_fields',\n                                tie_breaker: 0.3,\n                                minimum_should_match: '80%'\n                            }\n                        },\n                        should: [\n                            {\n                                exists: {\n                                    field: \"page_rank\",\n                                    boost: 1.5\n                                }\n                            },\n                            {\n                                range: {\n                                    page_rank: {\n                                        gt: 0,\n                                        boost: 2.0\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                },\n                size,\n                from: (page - 1) * size,\n                sort: [\n                    \"_score\",\n                    {\n                        page_rank: {\n                            order: \"desc\",\n                            missing: \"_last\"\n                        }\n                    }\n                ],\n                highlight: {\n                    pre_tags: [\n                        '<b>'\n                    ],\n                    post_tags: [\n                        '</b>'\n                    ],\n                    fields: {\n                        title: {\n                            number_of_fragments: 0,\n                            type: 'unified'\n                        },\n                        meta_description: {\n                            number_of_fragments: 1,\n                            fragment_size: 200,\n                            type: 'unified'\n                        },\n                        body: {\n                            number_of_fragments: 1,\n                            fragment_size: 200,\n                            type: 'unified'\n                        }\n                    }\n                }\n            }\n        });\n        const hits = response.hits;\n        return {\n            results: hits.hits.map((hit)=>{\n                // Safely parse the date with fallback\n                let timestamp = 'Unknown time';\n                try {\n                    if (hit._source.indexed_at) {\n                        const date = new Date(hit._source.indexed_at);\n                        if (!isNaN(date.getTime())) {\n                            timestamp = (0,_barrel_optimize_names_formatDistanceToNow_date_fns__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(date, {\n                                addSuffix: true\n                            });\n                        }\n                    }\n                } catch (e) {\n                    console.warn('Failed to parse date:', hit._source.indexed_at);\n                }\n                // Get the best description from available fields\n                const description = hit.highlight?.meta_description?.[0] || hit.highlight?.body?.[0] || hit._source.meta_description || hit._source.content_summary || '';\n                // Clean up description\n                const cleanDescription = description.replace(/\\[\\s*edit\\s*\\]/gi, '').replace(/Jump to (navigation|search)/gi, '').trim();\n                return {\n                    title: hit.highlight?.title?.[0] || hit._source.title || 'Untitled',\n                    url: hit._source.webpage_id || '',\n                    description: cleanDescription,\n                    siteName: hit._source.metadata?.site_name || (hit._source.webpage_id.startsWith('http') ? new URL(hit._source.webpage_id).hostname : 'Unknown'),\n                    timestamp,\n                    page_rank: hit._source.page_rank || 0,\n                    score: hit._score,\n                    content_summary: hit._source.content_summary || ''\n                };\n            }),\n            total: hits.total.value,\n            took: Date.now() - startTime\n        };\n    } catch (error) {\n        console.error('Elasticsearch search error:', error);\n        throw new SearchError('Failed to perform search', error);\n    }\n}\n// Health check function\nasync function checkElasticsearchHealth() {\n    try {\n        const response = await client.cluster.health();\n        return [\n            'green',\n            'yellow'\n        ].includes(response.status);\n    } catch (error) {\n        console.error('Elasticsearch health check failed:', error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cnMvcmFpbnNmYWxsL0Rvd25sb2Fkcy9zZWFyY2gtZW5naW5lL3NlcnZpY2VzL3dlYi9zcmMvbGliL2VsYXN0aWNzZWFyY2gudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSAnQGVsYXN0aWMvZWxhc3RpY3NlYXJjaCdcbmltcG9ydCB7IGZvcm1hdERpc3RhbmNlVG9Ob3cgfSBmcm9tICdkYXRlLWZucydcblxuY29uc3QgY2xpZW50ID0gbmV3IENsaWVudCh7XG4gIG5vZGU6IHByb2Nlc3MuZW52LkVMQVNUSUNTRUFSQ0hfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjkyMDAnLFxuICBtYXhSZXRyaWVzOiAzLFxuICByZXF1ZXN0VGltZW91dDogMTAwMDAsXG4gIHNuaWZmT25TdGFydDogdHJ1ZVxufSlcblxuaW50ZXJmYWNlIEVsYXN0aWNzZWFyY2hTb3VyY2Uge1xuICB3ZWJwYWdlX2lkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGJvZHk6IHN0cmluZztcbiAgaW5kZXhlZF9hdDogc3RyaW5nO1xuICBtZXRhZGF0YToge1xuICAgIHNpdGVfbmFtZTogc3RyaW5nO1xuICAgIGxhbmd1YWdlOiBzdHJpbmc7XG4gIH07XG4gIGNvbnRlbnRfc3VtbWFyeTogc3RyaW5nO1xuICBrZXl3b3Jkczogc3RyaW5nW107XG4gIHBhZ2VfcmFuazogbnVtYmVyO1xuICBtZXRhX3RpdGxlPzogc3RyaW5nO1xuICBtZXRhX2Rlc2NyaXB0aW9uPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgRWxhc3RpY3NlYXJjaEhpdCB7XG4gIF9zb3VyY2U6IEVsYXN0aWNzZWFyY2hTb3VyY2U7XG4gIF9zY29yZTogbnVtYmVyO1xuICBoaWdobGlnaHQ/OiB7XG4gICAgdGl0bGU/OiBzdHJpbmdbXTtcbiAgICBtZXRhX2Rlc2NyaXB0aW9uPzogc3RyaW5nW107XG4gICAgYm9keT86IHN0cmluZ1tdO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlYXJjaFJlc3VsdCB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHVybDogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBzaXRlTmFtZTogc3RyaW5nO1xuICB0aW1lc3RhbXA6IHN0cmluZztcbiAgcGFnZV9yYW5rOiBudW1iZXI7XG4gIHNjb3JlOiBudW1iZXI7XG4gIGNvbnRlbnRfc3VtbWFyeTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlYXJjaFJlc3BvbnNlIHtcbiAgcmVzdWx0czogU2VhcmNoUmVzdWx0W107XG4gIHRvdGFsOiBudW1iZXI7XG4gIHRvb2s6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFNlYXJjaEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHB1YmxpYyByZWFkb25seSBjYXVzZT86IHVua25vd24pIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnU2VhcmNoRXJyb3InO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2gocXVlcnk6IHN0cmluZywgcGFnZSA9IDEsIHNpemUgPSAxMCk6IFByb21pc2U8U2VhcmNoUmVzcG9uc2U+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LnNlYXJjaCh7XG4gICAgICBpbmRleDogJ3BhZ2VzJyxcbiAgICAgIGJvZHk6IHtcbiAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICBib29sOiB7XG4gICAgICAgICAgICBtdXN0OiB7XG4gICAgICAgICAgICAgIG11bHRpX21hdGNoOiB7XG4gICAgICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgICAgICAndGl0bGVeNCcsXG4gICAgICAgICAgICAgICAgICAnbWV0YV90aXRsZV4zJyxcbiAgICAgICAgICAgICAgICAgICdtZXRhX2Rlc2NyaXB0aW9uXjIuNScsXG4gICAgICAgICAgICAgICAgICAnY29udGVudF9zdW1tYXJ5XjInLFxuICAgICAgICAgICAgICAgICAgJ2JvZHleMSdcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdiZXN0X2ZpZWxkcycsXG4gICAgICAgICAgICAgICAgdGllX2JyZWFrZXI6IDAuMyxcbiAgICAgICAgICAgICAgICBtaW5pbXVtX3Nob3VsZF9tYXRjaDogJzgwJSdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNob3VsZDogW1xuICAgICAgICAgICAgICB7IGV4aXN0czogeyBmaWVsZDogXCJwYWdlX3JhbmtcIiwgYm9vc3Q6IDEuNSB9IH0sXG4gICAgICAgICAgICAgIHsgcmFuZ2U6IHsgcGFnZV9yYW5rOiB7IGd0OiAwLCBib29zdDogMi4wIH0gfSB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzaXplLFxuICAgICAgICBmcm9tOiAocGFnZSAtIDEpICogc2l6ZSxcbiAgICAgICAgc29ydDogW1xuICAgICAgICAgIFwiX3Njb3JlXCIsXG4gICAgICAgICAgeyBwYWdlX3Jhbms6IHsgb3JkZXI6IFwiZGVzY1wiLCBtaXNzaW5nOiBcIl9sYXN0XCIgfSB9XG4gICAgICAgIF0sXG4gICAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICAgIHByZV90YWdzOiBbJzxiPiddLFxuICAgICAgICAgIHBvc3RfdGFnczogWyc8L2I+J10sXG4gICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICB0aXRsZTogeyBcbiAgICAgICAgICAgICAgbnVtYmVyX29mX2ZyYWdtZW50czogMCxcbiAgICAgICAgICAgICAgdHlwZTogJ3VuaWZpZWQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWV0YV9kZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgICBudW1iZXJfb2ZfZnJhZ21lbnRzOiAxLFxuICAgICAgICAgICAgICBmcmFnbWVudF9zaXplOiAyMDAsXG4gICAgICAgICAgICAgIHR5cGU6ICd1bmlmaWVkJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgbnVtYmVyX29mX2ZyYWdtZW50czogMSxcbiAgICAgICAgICAgICAgZnJhZ21lbnRfc2l6ZTogMjAwLFxuICAgICAgICAgICAgICB0eXBlOiAndW5pZmllZCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGhpdHMgPSByZXNwb25zZS5oaXRzIGFzIHVua25vd24gYXMgeyBcbiAgICAgIGhpdHM6IEVsYXN0aWNzZWFyY2hIaXRbXSxcbiAgICAgIHRvdGFsOiB7IHZhbHVlOiBudW1iZXIgfVxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0czogaGl0cy5oaXRzLm1hcChoaXQgPT4ge1xuICAgICAgICAvLyBTYWZlbHkgcGFyc2UgdGhlIGRhdGUgd2l0aCBmYWxsYmFja1xuICAgICAgICBsZXQgdGltZXN0YW1wID0gJ1Vua25vd24gdGltZSc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGhpdC5fc291cmNlLmluZGV4ZWRfYXQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShoaXQuX3NvdXJjZS5pbmRleGVkX2F0KTtcbiAgICAgICAgICAgIGlmICghaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgICAgICAgICAgIHRpbWVzdGFtcCA9IGZvcm1hdERpc3RhbmNlVG9Ob3coZGF0ZSwgeyBhZGRTdWZmaXg6IHRydWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gcGFyc2UgZGF0ZTonLCBoaXQuX3NvdXJjZS5pbmRleGVkX2F0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCB0aGUgYmVzdCBkZXNjcmlwdGlvbiBmcm9tIGF2YWlsYWJsZSBmaWVsZHNcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBoaXQuaGlnaGxpZ2h0Py5tZXRhX2Rlc2NyaXB0aW9uPy5bMF0gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhpdC5oaWdobGlnaHQ/LmJvZHk/LlswXSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGl0Ll9zb3VyY2UubWV0YV9kZXNjcmlwdGlvbiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBoaXQuX3NvdXJjZS5jb250ZW50X3N1bW1hcnkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJyc7XG5cbiAgICAgICAgLy8gQ2xlYW4gdXAgZGVzY3JpcHRpb25cbiAgICAgICAgY29uc3QgY2xlYW5EZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uXG4gICAgICAgICAgLnJlcGxhY2UoL1xcW1xccyplZGl0XFxzKlxcXS9naSwgJycpXG4gICAgICAgICAgLnJlcGxhY2UoL0p1bXAgdG8gKG5hdmlnYXRpb258c2VhcmNoKS9naSwgJycpXG4gICAgICAgICAgLnRyaW0oKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRpdGxlOiBoaXQuaGlnaGxpZ2h0Py50aXRsZT8uWzBdIHx8IGhpdC5fc291cmNlLnRpdGxlIHx8ICdVbnRpdGxlZCcsXG4gICAgICAgICAgdXJsOiBoaXQuX3NvdXJjZS53ZWJwYWdlX2lkIHx8ICcnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBjbGVhbkRlc2NyaXB0aW9uLFxuICAgICAgICAgIHNpdGVOYW1lOiBoaXQuX3NvdXJjZS5tZXRhZGF0YT8uc2l0ZV9uYW1lIHx8IFxuICAgICAgICAgICAgKGhpdC5fc291cmNlLndlYnBhZ2VfaWQuc3RhcnRzV2l0aCgnaHR0cCcpID8gbmV3IFVSTChoaXQuX3NvdXJjZS53ZWJwYWdlX2lkKS5ob3N0bmFtZSA6ICdVbmtub3duJyksXG4gICAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICAgIHBhZ2VfcmFuazogaGl0Ll9zb3VyY2UucGFnZV9yYW5rIHx8IDAsXG4gICAgICAgICAgc2NvcmU6IGhpdC5fc2NvcmUsXG4gICAgICAgICAgY29udGVudF9zdW1tYXJ5OiBoaXQuX3NvdXJjZS5jb250ZW50X3N1bW1hcnkgfHwgJydcbiAgICAgICAgfTtcbiAgICAgIH0pLFxuICAgICAgdG90YWw6IGhpdHMudG90YWwudmFsdWUsXG4gICAgICB0b29rOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0VsYXN0aWNzZWFyY2ggc2VhcmNoIGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgU2VhcmNoRXJyb3IoJ0ZhaWxlZCB0byBwZXJmb3JtIHNlYXJjaCcsIGVycm9yKTtcbiAgfVxufVxuXG4vLyBIZWFsdGggY2hlY2sgZnVuY3Rpb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0VsYXN0aWNzZWFyY2hIZWFsdGgoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuY2x1c3Rlci5oZWFsdGgoKTtcbiAgICByZXR1cm4gWydncmVlbicsICd5ZWxsb3cnXS5pbmNsdWRlcyhyZXNwb25zZS5zdGF0dXMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0VsYXN0aWNzZWFyY2ggaGVhbHRoIGNoZWNrIGZhaWxlZDonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59Il0sIm5hbWVzIjpbIkNsaWVudCIsImZvcm1hdERpc3RhbmNlVG9Ob3ciLCJjbGllbnQiLCJub2RlIiwicHJvY2VzcyIsImVudiIsIkVMQVNUSUNTRUFSQ0hfVVJMIiwibWF4UmV0cmllcyIsInJlcXVlc3RUaW1lb3V0Iiwic25pZmZPblN0YXJ0IiwiU2VhcmNoRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsImNhdXNlIiwibmFtZSIsInNlYXJjaCIsInF1ZXJ5IiwicGFnZSIsInNpemUiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwicmVzcG9uc2UiLCJpbmRleCIsImJvZHkiLCJib29sIiwibXVzdCIsIm11bHRpX21hdGNoIiwiZmllbGRzIiwidHlwZSIsInRpZV9icmVha2VyIiwibWluaW11bV9zaG91bGRfbWF0Y2giLCJzaG91bGQiLCJleGlzdHMiLCJmaWVsZCIsImJvb3N0IiwicmFuZ2UiLCJwYWdlX3JhbmsiLCJndCIsImZyb20iLCJzb3J0Iiwib3JkZXIiLCJtaXNzaW5nIiwiaGlnaGxpZ2h0IiwicHJlX3RhZ3MiLCJwb3N0X3RhZ3MiLCJ0aXRsZSIsIm51bWJlcl9vZl9mcmFnbWVudHMiLCJtZXRhX2Rlc2NyaXB0aW9uIiwiZnJhZ21lbnRfc2l6ZSIsImhpdHMiLCJyZXN1bHRzIiwibWFwIiwiaGl0IiwidGltZXN0YW1wIiwiX3NvdXJjZSIsImluZGV4ZWRfYXQiLCJkYXRlIiwiaXNOYU4iLCJnZXRUaW1lIiwiYWRkU3VmZml4IiwiZSIsImNvbnNvbGUiLCJ3YXJuIiwiZGVzY3JpcHRpb24iLCJjb250ZW50X3N1bW1hcnkiLCJjbGVhbkRlc2NyaXB0aW9uIiwicmVwbGFjZSIsInRyaW0iLCJ1cmwiLCJ3ZWJwYWdlX2lkIiwic2l0ZU5hbWUiLCJtZXRhZGF0YSIsInNpdGVfbmFtZSIsInN0YXJ0c1dpdGgiLCJVUkwiLCJob3N0bmFtZSIsInNjb3JlIiwiX3Njb3JlIiwidG90YWwiLCJ2YWx1ZSIsInRvb2siLCJlcnJvciIsImNoZWNrRWxhc3RpY3NlYXJjaEhlYWx0aCIsImNsdXN0ZXIiLCJoZWFsdGgiLCJpbmNsdWRlcyIsInN0YXR1cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/elasticsearch.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/apache-arrow","vendor-chunks/@elastic","vendor-chunks/undici","vendor-chunks/axios","vendor-chunks/date-fns","vendor-chunks/asynckit","vendor-chunks/flatbuffers","vendor-chunks/debug","vendor-chunks/mime-db","vendor-chunks/form-data","vendor-chunks/follow-redirects","vendor-chunks/tslib","vendor-chunks/@babel","vendor-chunks/supports-color","vendor-chunks/secure-json-parse","vendor-chunks/proxy-from-env","vendor-chunks/ms","vendor-chunks/mime-types","vendor-chunks/hpagent","vendor-chunks/has-flag","vendor-chunks/delayed-stream","vendor-chunks/combined-stream"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsearch%2Froute&page=%2Fapi%2Fsearch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsearch%2Froute.ts&appDir=%2FUsers%2Frainsfall%2FDownloads%2Fsearch-engine%2Fservices%2Fweb%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frainsfall%2FDownloads%2Fsearch-engine%2Fservices%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();